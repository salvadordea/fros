import { Fragment } from 'react';\nimport { Link, useLocation } from 'react-router-dom';\nimport { Dialog, Transition } from '@headlessui/react';\nimport {\n  XMarkIcon,\n  HomeIcon,\n  BuildingStorefrontIcon,\n  CalendarDaysIcon,\n  CreditCardIcon,\n  UserGroupIcon,\n  Cog6ToothIcon,\n  ChartBarIcon,\n  UserCircleIcon,\n} from '@heroicons/react/24/outline';\nimport { useAuthStore } from '@/store/authStore';\n\ninterface SidebarProps {\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nconst Sidebar = ({ isOpen, onClose }: SidebarProps) => {\n  const location = useLocation();\n  const { user } = useAuthStore();\n\n  const navigation = [\n    { name: 'Dashboard', href: '/dashboard', icon: HomeIcon },\n    { name: 'Espacios', href: '/espacios', icon: BuildingStorefrontIcon },\n    { name: 'Reservas', href: '/reservas', icon: CalendarDaysIcon },\n    { name: 'Pagos', href: '/pagos', icon: CreditCardIcon },\n  ];\n\n  const adminNavigation = [\n    { name: 'Usuarios', href: '/admin/users', icon: UserGroupIcon },\n    { name: 'Reportes', href: '/admin/reports', icon: ChartBarIcon },\n    { name: 'Configuración', href: '/admin/config', icon: Cog6ToothIcon },\n  ];\n\n  const profileNavigation = [\n    { name: 'Mi Perfil', href: '/profile', icon: UserCircleIcon },\n  ];\n\n  const isActive = (href: string) => location.pathname === href;\n\n  const SidebarContent = () => (\n    <div className=\"flex flex-col h-full\">\n      {/* Logo */}\n      <div className=\"flex items-center justify-center h-16 px-4 bg-primary-600\">\n        <h1 className=\"text-xl font-bold text-white\">FROS</h1>\n      </div>\n\n      {/* Navigation */}\n      <nav className=\"flex-1 px-4 py-6 space-y-1 overflow-y-auto\">\n        {/* Main Navigation */}\n        <div className=\"space-y-1\">\n          {navigation.map((item) => (\n            <Link\n              key={item.name}\n              to={item.href}\n              className={`${\n                isActive(item.href)\n                  ? 'bg-primary-100 text-primary-700 border-r-2 border-primary-700'\n                  : 'text-gray-700 hover:bg-gray-100'\n              } group flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors duration-200`}\n              onClick={onClose}\n            >\n              <item.icon\n                className={`${\n                  isActive(item.href) ? 'text-primary-700' : 'text-gray-400 group-hover:text-gray-500'\n                } mr-3 h-5 w-5`}\n              />\n              {item.name}\n            </Link>\n          ))}\n        </div>\n\n        {/* Admin Navigation */}\n        {(user?.rol === 'ADMIN' || user?.rol === 'OPERADOR') && (\n          <div className=\"pt-6\">\n            <h3 className=\"px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider\">\n              Administración\n            </h3>\n            <div className=\"mt-2 space-y-1\">\n              {adminNavigation.map((item) => {\n                // Filter admin-only items for operators\n                if (item.href === '/admin/config' && user?.rol !== 'ADMIN') {\n                  return null;\n                }\n                return (\n                  <Link\n                    key={item.name}\n                    to={item.href}\n                    className={`${\n                      isActive(item.href)\n                        ? 'bg-primary-100 text-primary-700 border-r-2 border-primary-700'\n                        : 'text-gray-700 hover:bg-gray-100'\n                    } group flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors duration-200`}\n                    onClick={onClose}\n                  >\n                    <item.icon\n                      className={`${\n                        isActive(item.href) ? 'text-primary-700' : 'text-gray-400 group-hover:text-gray-500'\n                      } mr-3 h-5 w-5`}\n                    />\n                    {item.name}\n                  </Link>\n                );\n              })}\n            </div>\n          </div>\n        )}\n\n        {/* Profile Navigation */}\n        <div className=\"pt-6\">\n          <div className=\"space-y-1\">\n            {profileNavigation.map((item) => (\n              <Link\n                key={item.name}\n                to={item.href}\n                className={`${\n                  isActive(item.href)\n                    ? 'bg-primary-100 text-primary-700 border-r-2 border-primary-700'\n                    : 'text-gray-700 hover:bg-gray-100'\n                } group flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors duration-200`}\n                onClick={onClose}\n              >\n                <item.icon\n                  className={`${\n                    isActive(item.href) ? 'text-primary-700' : 'text-gray-400 group-hover:text-gray-500'\n                  } mr-3 h-5 w-5`}\n                />\n                {item.name}\n              </Link>\n            ))}\n          </div>\n        </div>\n      </nav>\n\n      {/* User Info */}\n      <div className=\"flex-shrink-0 px-4 py-4 border-t border-gray-200\">\n        <div className=\"flex items-center\">\n          <div className=\"flex-shrink-0\">\n            <UserCircleIcon className=\"h-8 w-8 text-gray-400\" />\n          </div>\n          <div className=\"ml-3\">\n            <p className=\"text-sm font-medium text-gray-700\">\n              {user?.nombre} {user?.apellido}\n            </p>\n            <p className=\"text-xs text-gray-500 capitalize\">\n              {user?.rol?.toLowerCase()}\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n\n  return (\n    <>\n      {/* Mobile sidebar */}\n      <Transition.Root show={isOpen} as={Fragment}>\n        <Dialog as=\"div\" className=\"relative z-50 md:hidden\" onClose={onClose}>\n          <Transition.Child\n            as={Fragment}\n            enter=\"transition-opacity ease-linear duration-300\"\n            enterFrom=\"opacity-0\"\n            enterTo=\"opacity-100\"\n            leave=\"transition-opacity ease-linear duration-300\"\n            leaveFrom=\"opacity-100\"\n            leaveTo=\"opacity-0\"\n          >\n            <div className=\"fixed inset-0 bg-gray-600 bg-opacity-75\" />\n          </Transition.Child>\n\n          <div className=\"fixed inset-0 flex z-50\">\n            <Transition.Child\n              as={Fragment}\n              enter=\"transition ease-in-out duration-300 transform\"\n              enterFrom=\"-translate-x-full\"\n              enterTo=\"translate-x-0\"\n              leave=\"transition ease-in-out duration-300 transform\"\n              leaveFrom=\"translate-x-0\"\n              leaveTo=\"-translate-x-full\"\n            >\n              <Dialog.Panel className=\"relative flex-1 flex flex-col max-w-xs w-full bg-white\">\n                <Transition.Child\n                  as={Fragment}\n                  enter=\"ease-in-out duration-300\"\n                  enterFrom=\"opacity-0\"\n                  enterTo=\"opacity-100\"\n                  leave=\"ease-in-out duration-300\"\n                  leaveFrom=\"opacity-100\"\n                  leaveTo=\"opacity-0\"\n                >\n                  <div className=\"absolute top-0 right-0 -mr-12 pt-2\">\n                    <button\n                      type=\"button\"\n                      className=\"ml-1 flex items-center justify-center h-10 w-10 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white\"\n                      onClick={onClose}\n                    >\n                      <XMarkIcon className=\"h-6 w-6 text-white\" />\n                    </button>\n                  </div>\n                </Transition.Child>\n                <SidebarContent />\n              </Dialog.Panel>\n            </Transition.Child>\n          </div>\n        </Dialog>\n      </Transition.Root>\n\n      {/* Desktop sidebar */}\n      <div className=\"hidden md:flex md:w-64 md:flex-col md:fixed md:inset-y-0\">\n        <div className=\"flex-1 flex flex-col min-h-0 bg-white border-r border-gray-200\">\n          <SidebarContent />\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default Sidebar;"